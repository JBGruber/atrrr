---
title: "Basic Usage"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Basic_Usage}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---




# Introduction


Welcome to the `atrrr` vignette! This guide will delve deeper into the functionalities offered by the package-

Before diving in, let's clarify some terminology. In the context of Blue Sky, a post is referred to as a "skeet." So, when we mention retrieving or working with "skeets," we are talking about individual posts made on Blue Sky.

Now, let's delve deeper into the functionalities that allow users to interact with skeets, followers, and their descriptions.

## Installation

If you haven't done so, you can install the development version of atrrr like so (`pak` works similar to `remotes` here, but it's what the cool kids use now :grin:):

``` r
# install.packages("pak")
pak::pak("JBGruber/atrrr")
```


## Load the package


``` r
library(atrrr)
```

## Authentication

The first time you make a request, you will be prompted automatically to enter your user handle and an app password to authenticate `atrrr` to communicate with BlueSky for you.

![RStudio Popup](figures/password_popup.png)

The page to generate app passwords is also automatically opened for you.

![page to create new app passwords](figures/app_password.png)

However, you can also trigger this process manually:


``` r
auth("jbgruber.bsky.social")
```

This can be useful if you want to replace an old token as it is permanently stored encrypted on disk.

# Searching Posts


You can search Posts on Bluesky using a small set of operators:

- Whitespace is treated as implicit AND, so all words in a query must occur
- Double quotes indicate exact phrases
- `from:<handle>` will filter to results from that account
- `-` excludes terms

Note that matches can occur anywhere in the skeet, not just the text.
For example, a term can be in the link preview, or alt text of an image.

A couple of examples:


``` r
search_post("rstats")
#> # A tibble: 100 Ã— 18
#>    uri   cid   author_handle author_name text  author_data  post_data    embed_data   reply_count
#>    <chr> <chr> <chr>         <chr>       <chr> <list>       <list>       <list>             <int>
#>  1 at:/â€¦ bafyâ€¦ tterence.bskâ€¦ terence     "Ligâ€¦ <named list> <named list> <named list>           0
#>  2 at:/â€¦ bafyâ€¦ emazaola.bskâ€¦ <NA>        "Morâ€¦ <named list> <named list> <named list>           0
#>  3 at:/â€¦ bafyâ€¦ rosenetwork.â€¦ RoSE Netwoâ€¦ "ðŸš¨Nâ€¦ <named list> <named list> <named list>           0
#>  4 at:/â€¦ bafyâ€¦ cranberriesfâ€¦ CRAN Packaâ€¦ "CRAâ€¦ <named list> <named list> <NULL>                 0
#>  5 at:/â€¦ bafyâ€¦ avehtari.bskâ€¦ Aki Vehtarâ€¦ "Theâ€¦ <named list> <named list> <named list>           1
#>  6 at:/â€¦ bafyâ€¦ cranberriesfâ€¦ CRAN Packaâ€¦ "CRAâ€¦ <named list> <named list> <NULL>                 0
#>  7 at:/â€¦ bafyâ€¦ jimjamslam.bâ€¦ James Goldâ€¦ "ðŸ’¡ â€¦ <named list> <named list> <named list>           0
#>  8 at:/â€¦ bafyâ€¦ tterence.bskâ€¦ terence     "Rivâ€¦ <named list> <named list> <named list>           1
#>  9 at:/â€¦ bafyâ€¦ jeremywallacâ€¦ Jeremy Walâ€¦ "Welâ€¦ <named list> <named list> <NULL>                 0
#> 10 at:/â€¦ bafyâ€¦ cranberriesfâ€¦ CRAN Packaâ€¦ "CRAâ€¦ <named list> <named list> <NULL>                 0
#> # â„¹ 90 more rows
#> # â„¹ 9 more variables: repost_count <int>, like_count <int>, indexed_at <dttm>,
#> #   in_reply_to <chr>, in_reply_root <chr>, quotes <chr>, tags <list>, mentions <list>,
#> #   links <list>
```

This finds posts where "rstats" is found somewhere in the post.


``` r
search_post("#rstats Bluesky")
#> # A tibble: 34 Ã— 18
#>    uri   cid   author_handle author_name text  author_data  post_data    embed_data   reply_count
#>    <chr> <chr> <chr>         <chr>       <chr> <list>       <list>       <list>             <int>
#>  1 at:/â€¦ bafyâ€¦ gdeejay.bskyâ€¦ Giles       "Oneâ€¦ <named list> <named list> <NULL>                 0
#>  2 at:/â€¦ bafyâ€¦ dariia.bsky.â€¦ Dariia Mykâ€¦ "Bluâ€¦ <named list> <named list> <named list>           0
#>  3 at:/â€¦ bafyâ€¦ o.simardcasaâ€¦ Olivier Siâ€¦ "Thiâ€¦ <named list> <named list> <named list>          16
#>  4 at:/â€¦ bafyâ€¦ thomascwellsâ€¦ Thomas W    "Jusâ€¦ <named list> <named list> <named list>           0
#>  5 at:/â€¦ bafyâ€¦ nrennie.bskyâ€¦ Nicola Renâ€¦ "A râ€¦ <named list> <named list> <named list>           0
#>  6 at:/â€¦ bafyâ€¦ o.simardcasaâ€¦ Olivier Siâ€¦ "Theâ€¦ <named list> <named list> <named list>           0
#>  7 at:/â€¦ bafyâ€¦ thoughtfulnzâ€¦ David Hood  "Cheâ€¦ <named list> <named list> <NULL>                 1
#>  8 at:/â€¦ bafyâ€¦ o.simardcasaâ€¦ Olivier Siâ€¦ "Witâ€¦ <named list> <named list> <named list>           2
#>  9 at:/â€¦ bafyâ€¦ seacatkim.bsâ€¦ Catherine   "Helâ€¦ <named list> <named list> <NULL>                 4
#> 10 at:/â€¦ bafyâ€¦ thoughtfulnzâ€¦ David Hood  "#30â€¦ <named list> <named list> <named list>           2
#> # â„¹ 24 more rows
#> # â„¹ 9 more variables: repost_count <int>, like_count <int>, indexed_at <dttm>,
#> #   in_reply_to <chr>, in_reply_root <chr>, quotes <chr>, tags <list>, mentions <list>,
#> #   links <list>
```

This finds posts with the hashtag "rstats" AND the word Bluesky somewhere in the skeet (ignoring capitalisaion).

You can also search for the exact phrase "new #rstats package":


``` r
search_post("\"new #rstats package\"")
#> # A tibble: 17 Ã— 18
#>    uri   cid   author_handle author_name text  author_data  post_data    embed_data   reply_count
#>    <chr> <chr> <chr>         <chr>       <chr> <list>       <list>       <list>             <int>
#>  1 at:/â€¦ bafyâ€¦ seabbs.bsky.â€¦ "Sam Abbotâ€¦ "Newâ€¦ <named list> <named list> <named list>           1
#>  2 at:/â€¦ bafyâ€¦ coatless.bskâ€¦ "James Balâ€¦ "Intâ€¦ <named list> <named list> <named list>           0
#>  3 at:/â€¦ bafyâ€¦ heinersalomoâ€¦ "Heiner Saâ€¦ "Thiâ€¦ <named list> <named list> <named list>           1
#>  4 at:/â€¦ bafyâ€¦ egorkotov.bsâ€¦ "Egor Kotoâ€¦ "We'â€¦ <named list> <named list> <named list>           0
#>  5 at:/â€¦ bafyâ€¦ egorkotov.bsâ€¦ "Egor Kotoâ€¦ "Faiâ€¦ <named list> <named list> <named list>           0
#>  6 at:/â€¦ bafyâ€¦ frodsan.bskyâ€¦ "Franciscoâ€¦ "Thiâ€¦ <named list> <named list> <named list>           1
#>  7 at:/â€¦ bafyâ€¦ simonpcouch.â€¦ "Simon P. â€¦ "ðŸš¨Nâ€¦ <named list> <named list> <named list>           0
#>  8 at:/â€¦ bafyâ€¦ posit.co      "Posit"     "Weâ€™â€¦ <named list> <named list> <named list>           0
#>  9 at:/â€¦ bafyâ€¦ chriskenny.bâ€¦ "Chris Kenâ€¦ "Newâ€¦ <named list> <named list> <named list>           0
#> 10 at:/â€¦ bafyâ€¦ robjhyndman.â€¦ "Rob Hyndmâ€¦ "My â€¦ <named list> <named list> <named list>           0
#> 11 at:/â€¦ bafyâ€¦ cghlewis.bskâ€¦ "Crystal Lâ€¦ "Wheâ€¦ <named list> <named list> <named list>           0
#> 12 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ "Johannes â€¦ "Newâ€¦ <named list> <named list> <named list>           1
#> 13 at:/â€¦ bafyâ€¦ mikemahoney2â€¦ "Mike Mahoâ€¦ "ðŸ“£ â€¦ <named list> <named list> <named list>           0
#> 14 at:/â€¦ bafyâ€¦ mikemahoney2â€¦ "Mike Mahoâ€¦ "Excâ€¦ <named list> <named list> <named list>           0
#> 15 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ "Johannes â€¦ "Newâ€¦ <named list> <named list> <named list>           1
#> 16 at:/â€¦ bafyâ€¦ pciarchaeoloâ€¦ ""          "2/3â€¦ <named list> <named list> <named list>           1
#> 17 at:/â€¦ bafyâ€¦ eddelbuettelâ€¦ "Dirk Eddeâ€¦ "Eveâ€¦ <named list> <named list> <named list>           0
#> # â„¹ 9 more variables: repost_count <int>, like_count <int>, indexed_at <dttm>,
#> #   in_reply_to <chr>, in_reply_root <chr>, quotes <chr>, tags <list>, mentions <list>,
#> #   links <list>
```

``` r
#' # Use single quotes so you do not need to escape double quotes
#' search_post('"new #rstats package"')
```

You can also limit your search by only looking for skeets from one user:


``` r
search_post("from:jbgruber.bsky.social #rstats")
#> # A tibble: 31 Ã— 18
#>    uri   cid   author_handle author_name text  author_data  post_data    embed_data   reply_count
#>    <chr> <chr> <chr>         <chr>       <chr> <list>       <list>       <list>             <int>
#>  1 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "Tesâ€¦ <named list> <named list> <named list>           0
#>  2 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "Tesâ€¦ <named list> <named list> <named list>           0
#>  3 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "Tesâ€¦ <named list> <named list> <NULL>                 0
#>  4 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "llaâ€¦ <named list> <named list> <named list>           1
#>  5 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "I tâ€¦ <named list> <named list> <named list>           1
#>  6 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "I jâ€¦ <named list> <named list> <named list>           1
#>  7 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "I aâ€¦ <named list> <named list> <named list>           1
#>  8 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "Cheâ€¦ <named list> <named list> <named list>           1
#>  9 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "Forâ€¦ <named list> <named list> <named list>           0
#> 10 at:/â€¦ bafyâ€¦ jbgruber.bskâ€¦ Johannes Bâ€¦ "My â€¦ <named list> <named list> <named list>           0
#> # â„¹ 21 more rows
#> # â„¹ 9 more variables: repost_count <int>, like_count <int>, indexed_at <dttm>,
#> #   in_reply_to <chr>, in_reply_root <chr>, quotes <chr>, tags <list>, mentions <list>,
#> #   links <list>
```

# Blue Sky Users and Skeets


## Retrieve user info (`get_user_info`)

A good starting point is understanding a user's digital footprint on the platform. The get_user_info function becomes our handy tool, fetching an array of information about a user. All you need? Their handle!



``` r
get_user_info(actor = "atpr.bsky.social")  |>
  dplyr::glimpse()
#> Rows: 1
#> Columns: 8
#> $ did               <chr> "did:plc:j42kj4qc5vfz344weywpkair"
#> $ indexed_at        <dttm> 1-01-01
#> $ actor_handle      <chr> "atpr.bsky.social"
#> $ actor_name        <chr> NA
#> $ actor_description <chr> NA
#> $ actor_avatar      <chr> NA
#> $ viewer_data       <list> [FALSE, FALSE, "at://did:plc:ntd53albt5ffa4rgervvgibd/app.bsky.graph.â€¦
#> $ labels_data       <list> []
```

This function gives us counts of followers, follows, posts for each user.

You can also retrieve information for multiple users by providing a vector of user handles:


``` r
get_user_info(actor = c("benguinaudeau.bsky.social", "atpr.bsky.social"))  |>
  dplyr::glimpse()
#> Rows: 2
#> Columns: 8
#> $ did               <chr> "did:plc:vuvsifrusnjsys7mhkpk662u", "did:plc:j42kj4qc5vfz344weywpkair"
#> $ indexed_at        <dttm> 2024-01-26 01:28:47, 1-01-01 00:00:00
#> $ actor_handle      <chr> "benguinaudeau.bsky.social", "atpr.bsky.social"
#> $ actor_name        <chr> "Benjamin Guinaudeau", NA
#> $ actor_description <chr> "Postdoc @CSMaP_NYU. \n\nPolitics, data science, and hacking stuff inâ€¦
#> $ actor_avatar      <chr> "https://cdn.bsky.app/img/avatar/plain/did:plc:vuvsifrusnjsys7mhkpk6â€¦
#> $ viewer_data       <list> [FALSE, FALSE, "at://did:plc:ntd53albt5ffa4rgervvgibd/app.bsky.graph.â€¦
#> $ labels_data       <list> [], []
```


## Retrieve Skeets (`get_skeets_authored_by`)

To fetch all the skeets by a specific user, use the `get_skeets_authored_by` function. *Note this also includes quote skeets and reskeets.* You can also opt not to parse the result by setting `parse = FALSE`, however it is recommended to use the default parse option which results in a (more) tidy tibble.


``` r
get_skeets_authored_by(actor = "benguinaudeau.bsky.social", parse = TRUE) |>
  dplyr::glimpse()
#> Rows: 25
#> Columns: 19
#> $ uri           <chr> "at://did:plc:f5jstfwgvzacfsdjjdia4466/app.bsky.feed.post/3knyr4ydsqb2w",â€¦
#> $ cid           <chr> "bafyreieqiqwb4wwzosmx4jg3cee5ob2guc6qnjswkridxokkh23fm6wghq", "bafyreiabâ€¦
#> $ author_handle <chr> "jacobmontgomery.bsky.social", "beamagistro.bsky.social", "jbgruber.bsky.â€¦
#> $ author_name   <chr> "I jacob, the pumpkin king ðŸŽƒ ðŸ‘‘ ", "Beatrice Magistro", "Johannes B. Gruâ€¦
#> $ text          <chr> "Seriously? Not a single woman instructor, presenter, or organizer for a â€¦
#> $ author_data   <list> ["did:plc:f5jstfwgvzacfsdjjdia4466", "jacobmontgomery.bsky.social", "I jâ€¦
#> $ post_data     <list> ["app.bsky.feed.post", "2024-03-18T21:09:28.158Z", ["app.bsky.embed.exteâ€¦
#> $ embed_data    <list> ["app.bsky.embed.external#view", ["https://www.law.northwestern.edu/reseâ€¦
#> $ reply_count   <int> 0, 0, 1, 4, 0, 0, 4, 0, 1, 9, 0, 1, 0, 1, 0, 0, 0, 0, 1, 12, 0, 0, 1, 1, 1
#> $ repost_count  <int> 3, 6, 6, 8, 0, 0, 15, 2, 1, 431, 3, 1, 5, 28, 0, 0, 0, 0, 0, 289, 14, 1, â€¦
#> $ like_count    <int> 13, 12, 20, 13, 1, 1, 42, 6, 1, 609, 7, 3, 10, 35, 1, 0, 1, 3, 2, 453, 37â€¦
#> $ indexed_at    <dttm> 2024-03-18 21:09:28, 2024-02-16 17:26:58, 2024-01-10 15:23:18, 2024-01-04â€¦
#> $ in_reply_to   <chr> NA, NA, NA, NA, NA, "at://did:plc:eotrvt2wp6mqooxjf3bzklwa/app.bsky.feedâ€¦
#> $ in_reply_root <chr> NA, NA, NA, NA, NA, "at://did:plc:eotrvt2wp6mqooxjf3bzklwa/app.bsky.feed.â€¦
#> $ quotes        <chr> NA, NA, "at://did:plc:vgvueqvmbqgoyxtcdebqdcgb/app.bsky.feed.post/3kin4viâ€¦
#> $ tags          <list> <NULL>, <NULL>, "rstats", "rstats", <NULL>, <NULL>, <NULL>, <NULL>, "AoE"â€¦
#> $ mentions      <list> <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, â€¦
#> $ links         <list> <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, â€¦
#> $ is_reskeet    <lgl> TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, TRUE, TRUE, FALSE, TRUE, FALSE, TRâ€¦
```

Feeling adventurous? Increase the `limit` and explore more of their content.


``` r
get_skeets_authored_by(actor = "favstats.bsky.social", limit = 30) |>
  dplyr::glimpse()
#> Rows: 30
#> Columns: 19
#> $ uri           <chr> "at://did:plc:7ao77wemnhl63qnpuy7psebr/app.bsky.feed.post/3l55lu5ebts24",â€¦
#> $ cid           <chr> "bafyreibgmqfbgls7rvgusnr4k6arykcsmwvxkpiev6nlh5pel5inx3lusa", "bafyreieaâ€¦
#> $ author_handle <chr> "whotargetsme.bsky.social", "whotargetsme.bsky.social", "favstats.bsky.soâ€¦
#> $ author_name   <chr> "Who Targets Me", "Who Targets Me", "Fabio VottaðŸ“ŠðŸ§ ", "Johannes B. Grubâ€¦
#> $ text          <chr> "Interesting how Democrats and Republicans are competing to target Latinoâ€¦
#> $ author_data   <list> ["did:plc:7ao77wemnhl63qnpuy7psebr", "whotargetsme.bsky.social", "Who Taâ€¦
#> $ post_data     <list> ["app.bsky.feed.post", "2024-09-27T16:36:15.797Z", ["app.bsky.embed.imagâ€¦
#> $ embed_data    <list> ["app.bsky.embed.images#view", [["https://cdn.bsky.app/img/feed_thumbnaiâ€¦
#> $ reply_count   <int> 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0â€¦
#> $ repost_count  <int> 1, 1, 0, 8, 5, 0, 2, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0â€¦
#> $ like_count    <int> 1, 2, 2, 13, 5, 0, 1, 10, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 10â€¦
#> $ indexed_at    <dttm> 2024-09-27 16:36:15, 2024-09-27 16:38:18, 2024-09-19 16:33:57, 2024-09-1â€¦
#> $ in_reply_to   <chr> NA, "at://did:plc:7ao77wemnhl63qnpuy7psebr/app.bsky.feed.post/3l55lu5ebtsâ€¦
#> $ in_reply_root <chr> NA, "at://did:plc:7ao77wemnhl63qnpuy7psebr/app.bsky.feed.post/3l55lu5ebtsâ€¦
#> $ quotes        <chr> NA, NA, NA, NA, NA, NA, "at://did:plc:46yyakot3byghwqc6rhmqzqd/app.bsky.fâ€¦
#> $ tags          <list> <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, â€¦
#> $ mentions      <list> <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, â€¦
#> $ links         <list> <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, <NULL>, â€¦
#> $ is_reskeet    <lgl> TRUE, TRUE, FALSE, TRUE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, Fâ€¦
```


## Who liked your Skeets?

The get_likes function allows you to extract detailed information about users who liked a specific post. By simply providing the post's URL, you can get a list of users who expressed their appreciation for the content.




``` r
get_likes("https://bsky.app/profile/ryanlcooper.com/post/3kb42gayda52t")  |>
  dplyr::glimpse()
#> Rows: 25
#> Columns: 5
#> $ created_at   <dttm> 2024-02-29 22:14:52, 2024-02-26 13:03:05, 2024-02-23 23:38:41, 2024-01-25â€¦
#> $ indexed_at   <dttm> 2024-02-29 22:14:52, 2024-02-26 13:03:05, 2024-02-23 23:38:41, 2024-01-25â€¦
#> $ actor_handle <chr> "dsfpspacefl1ght.bsky.social", "demonchuckle.bsky.social", "butpawwwlll.bsâ€¦
#> $ actor_name   <chr> "David S. F. Portree, quasi-retired writer, archivist, & educator", "Demonâ€¦
#> $ actor_data   <list> ["did:plc:b3igxlkvw5hbsjxurrv2xb74", "dsfpspacefl1ght.bsky.social", "Daviâ€¦
```

## Who reposted your Skeets?

Reposts (or reskeets), akin to retweets on platforms like Twitter, amplify the reach of content by sharing it with a wider audience.

The `get_reposts` function is designed to retrieve information about users who reposted a specific piece of content.


``` r
get_reposts(post_url = "https://bsky.app/profile/ryanlcooper.com/post/3kb42gayda52t")  |>
  dplyr::glimpse()
#> Rows: 25
#> Columns: 8
#> $ did               <chr> "did:plc:zyvmwfzbkt3igdqgpemu3pot", "did:plc:zyb3zoeo2snrj6ugwirudqysâ€¦
#> $ indexed_at        <dttm> 2024-01-26 00:03:39, 2024-01-26 00:35:53, 2024-03-21 11:54:36, 2024-â€¦
#> $ actor_handle      <chr> "zunguzungu.bsky.social", "bertierustle.bsky.social", "gebi.bsky.sociâ€¦
#> $ actor_name        <chr> "Aaron Bady", "Bertie Rustle", "Michael Gebetsroither", "Amanda Katz"â€¦
#> $ actor_description <chr> "Meat blood, bees, things of that nature", "Mouthy leftist/Giver Goddâ€¦
#> $ actor_avatar      <chr> "https://cdn.bsky.app/img/avatar/plain/did:plc:zyvmwfzbkt3igdqgpemu3pâ€¦
#> $ viewer_data       <list> [FALSE, FALSE], [FALSE, FALSE], [FALSE, FALSE], [FALSE, FALSE], [FALâ€¦
#> $ labels_data       <list> [], [], [], [], [], [], [], [], [["did:plc:zrrfehir5gdxoapcddwea2fg"â€¦
```



# Exploring Connections: Get Followers and Follows

You can retrieve a list of followers and those followed by a user through the `get_followers` and `get_follows` functions, respectively. This gives a glimpse of their social dynamics on the platform.

## `get_followers`


``` r
get_followers(actor = "benguinaudeau.bsky.social", limit = 200)  |>
  dplyr::glimpse()
#> Rows: 299
#> Columns: 8
#> $ did               <chr> "did:plc:c27h545kxtb7yyh7zg3jkdsm", "did:plc:l3rfgtccdg3lkqg3nbhgnwk3â€¦
#> $ indexed_at        <dttm> 2024-09-18 05:31:06, 2024-09-21 22:04:38, 2024-09-18 07:22:44, 2024-â€¦
#> $ actor_handle      <chr> "goodword2654.bsky.social", "andreucasas.bsky.social", "earth-pic.bskâ€¦
#> $ actor_name        <chr> "ì¢‹ì€ê¸€", "Andreu Casas", "Earth pic", "Anton Strezhnev", "Lawrence Mâ€¦
#> $ actor_description <chr> "ë§¤ì¼ ì•„ì¹¨ ë§ˆìŒì„ ê¹¨ìš°ëŠ” ì‹œ í•œ íŽ¸\nê½ƒì²˜ëŸ¼ ì•„ë¦„ë‹¤ìš´ í•˜ë£¨ê°€ ë‹¹ì‹ ì—ê²Œ ê½ƒâ€¦
#> $ actor_avatar      <chr> "https://cdn.bsky.app/img/avatar/plain/did:plc:c27h545kxtb7yyh7zg3jkdâ€¦
#> $ viewer_data       <list> [FALSE, FALSE], [FALSE, FALSE, "at://did:plc:ntd53albt5ffa4rgervvgibâ€¦
#> $ labels_data       <list> [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], â€¦
```


## `get_follows`


``` r
atrrr:::get_follows(actor = "benguinaudeau.bsky.social", limit = 200)  |>
  dplyr::glimpse()
#> Rows: 173
#> Columns: 8
#> $ did               <chr> "did:plc:3ryku2cbgpazorytvt6lt273", "did:plc:miczfsfixolk42l7343z3bpdâ€¦
#> $ indexed_at        <dttm> 2024-02-08 05:16:04, 2024-01-25 23:49:49, 2024-01-25 23:51:33, 2024-â€¦
#> $ actor_handle      <chr> "beamagistro.bsky.social", "sethcotlar.bsky.social", "aoc.bsky.socialâ€¦
#> $ actor_name        <chr> "Beatrice Magistro", "Seth Cotlar", "Alexandria Ocasio-Cortez", "CRANâ€¦
#> $ actor_description <chr> "PostDoc @Caltech, thru @UofT. Poli Sci PhD \n@UW-Seattle. ðŸ‡®ðŸ‡¹ðŸ‡ªðŸ‡ºðŸ‡ºðŸ‡¸ðŸ‡¨ðŸ‡¦, â€¦
#> $ actor_avatar      <chr> "https://cdn.bsky.app/img/avatar/plain/did:plc:3ryku2cbgpazorytvt6lt2â€¦
#> $ viewer_data       <list> [FALSE, FALSE], [FALSE, FALSE], [FALSE, FALSE], [FALSE, FALSE, "at:/â€¦
#> $ labels_data       <list> [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], â€¦
```

You'll notice each follower/following has a description (i.e. their bio). It's a nifty way to get to know a bit about them at a glance!


## Follower Network Visualization

This section guides you through the process of visualizing a follower network for a given user on Blue Sky. The primary focus is on the "skeets" (posts) and the interconnected relationships among followers.

The first step is to load some additional packages. Then we get the followers for the main user we are interested in. We will then delve deeper and fetch the followers for each of these followers.


``` r
library(ggplot2)
library(dplyr)
library(purrr)
library(tidyr)
library(igraph)
library(ggraph)
library(tidygraph)

# Retrieve the followers for the main user
some_followers <- get_followers(actor = "benguinaudeau.bsky.social", limit = 10)$actor_handle

# For each follower, retrieve their own set of followers.
# This provides a nested view of relationships.
followers_of_followers <- some_followers |>
  purrr::map_dfr(~{
    get_followers(actor = .x, limit = 200) |>
    mutate(from = .x)
  }) |>
  dplyr::rename(to = actor_handle) |>
  dplyr::select(from, to)
```


## Building and Visualizing the Follower Network


``` r
# Construct the network graph and plot
graph <- igraph::graph_from_data_frame(followers_of_followers, directed = TRUE)

# Use ggraph to visualize the network.
ggraph::ggraph(graph, layout = "kk") +
  ggraph::geom_edge_link() +
  ggraph::geom_node_point(aes(size = tidygraph::centrality_pagerank())) +
  ggplot2::theme_void()
```

<div class="figure">
<img src="figures/unnamed-chunk-16-1.png" alt="Follower Network" width="100%" />
<p class="caption">Follower Network</p>
</div>


## Find people to follow

You can use a similar approach to find new people you might want to follow.
First get all the people you already follow by quering your own account:


``` r
my_follows <- get_follows(actor = "jbgruber.bsky.social",
                              limit = 10)$actor_handle # limit only for demonstration

# For each account you follow, retrieve who they follow.
follows_of_follows <- my_follows |>
  purrr::map_dfr(~{
    get_followers(actor = .x, limit = 100) |>
      mutate(from = .x)
  })

# Now we can check which accounts are popular among the people you already follow
follows_of_follows |>
  dplyr::filter(!actor_handle %in% my_follows) |> # exclude accounts you already follow
  dplyr::count(actor_name, actor_handle, sort = TRUE)
#> # A tibble: 1,393 Ã— 3
#>    actor_name                actor_handle                     n
#>    <chr>                     <chr>                        <int>
#>  1 "Johannes B. Gruber"      jbgruber.bsky.social             7
#>  2 "Analytical Sociology"    iasliu.bsky.social               3
#>  3 "Jihed Ncib"              jihedncib.bsky.social            3
#>  4 "Prof David Farrell, UCD" davidfarrell-ucd.bsky.social     3
#>  5 ""                        ab4aba.bsky.social               2
#>  6 ""                        uupeace.bsky.social              2
#>  7 "Alexandre Raffoul"       awraffoul.bsky.social            2
#>  8 "Allison Koh"             allisonwkoh.bsky.social          2
#>  9 "Amar jeet"               amarjeat.bsky.social             2
#> 10 "Andreas HÃ¶vermann "      andreashoev.bsky.social          2
#> # â„¹ 1,383 more rows
```

The original account shows up in this overview, as do accounts that were excluded because of the limit set to do the demonstration.

But all of these accounts look intresting!




<!-- ### Eventual temporal structure -->
